<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>SmaPri Print</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>

<h3>Label Data</h3>

<label>
Item Name:
<input id="item_name" type="text" value="Apple">
</label><br><br>

<label>
Origin:
<input id="item_origin" type="text" value="USA">
</label><br><br>

<label>
Batch:
<input id="item_batch" type="text" value="B24011601">
</label><br><br>

<label>
Price:
<input id="item_price" type="number" step="0.01" value="1.50">
</label><br><br>

<button onclick="printLabel()">Print Label</button>

<script>
function isIOS() {
    return /iPhone|iPad|iPod/i.test(navigator.userAgent);
}

function printLabel() {

    var formatUrl =
        "https://raw.githubusercontent.com/wingsato/smapri/main/smarpi-NTUC-test.spfmtz";

    var itemName   = document.getElementById("item_name").value;
    var itemOrigin = document.getElementById("item_origin").value;
    var itemBatch  = document.getElementById("item_batch").value;
    var itemPrice  = document.getElementById("item_price").value;

    var params =
        "__format_id_number=1" +
        "&__format_archive_url=" + encodeURIComponent(formatUrl) +
        "&item_name="   + encodeURIComponent(itemName) +
        "&item_origin=" + encodeURIComponent(itemOrigin) +
        "&item_batch="  + encodeURIComponent(itemBatch) +
        "&item_price="  + encodeURIComponent(itemPrice);

    var url = isIOS()
        ? "smapri:/Format/Print?" + params
        : "http://localhost:8080/Format/Print?" + params;

    window.location.href = url;
}
</script>

</body>
</html>
